<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Contact Us</title>
</head>
<body>
    <section class="header-buttons section-gap">
        <div class="button-wrapper text-center">
            <button>
                <a href="">VIEW DOCUMENTATION</a>
            </button>
            <button>
                <a href="">RAISE TICKET</a>
            </button>
        </div>
    </section>
    <section class="raise-ticket-section section-gap">
        <div class="title-wrapper">
            <h1>Raise ticket</h1>
        </div>
        <div class="raise-ticket-wrapper">
            <div class="rasie-ticket-form">
                <form action="javascript:sendmail()" method="post" class="form">
                    <div class="field">
                    <input type="text" class="form-control" name="Name" id="Name" placeholder="Name" required="">
                    </div>
                    <div class="field">
                    <input type="email" class="form-control" name="Sender" id="Sender" placeholder="Email"
                        required="">
                    </div>
                    <div class="field">
                    <input type="text" class="form-control" name="Subject" id="Subject" placeholder="Subject"
                        required="">
                    </div>
                    <textarea name="Message" class="form-control" id="Message" placeholder="Message"
                    required=""></textarea>
                    <button type="submit" class="btn btn-contact">Raise ticket</button>
                </form>
            </div>
        </div>
        <div class="raise-ticket-info">

        </div>
      </section>
    <script src="https://smtpjs.com/v3/smtp.js"></script>
    <script>  
    
    function sendmail(){
        let wrapper = document.querySelector('.rasie-ticket-form');
        let form = wrapper.querySelector('.form');
        var formData = new FormData(form);
        var name = formData.get('Name');
        var body = 'Name: ' + name +'<br>Email: ' + formData.get('Sender') + '<br>Subject: ' + formData.get('Subject') + '<br>Message: ' + formData.get('Message');
                // var name = $('#Name').val();
                // var email = $('#Sender').val();
                // var subject = $('#Subject').val();
                // var message = $('#Message').val();
    
                // // var body = $('#body').val();
    
                // var Body='Name: '+name+'<br>Email: '+email+'<br>Subject: '+subject+'<br>Message: '+message;
                //console.log(name, phone, email, message);
    
        Email.send({
            Host : 'smtp.gmail.com',
            Username : 'technicalscience646@gmail.com',
            Password : 'ShiMit@1899',
            To : 'digiworld1808@gmail.com',
            From : 'technicalscience646@gmail.com',
            Subject : 'Ticket raise by ' + name,
            Body : body
        }).then(
            message =>{
                console.log (message);
                if(message=='OK'){
                alert('Your ticket has been raised. Thank you for connecting. We will mail you soon.');
                }
                else{
                    console.error (message);
                    alert('There is error at sending message. ')
                    
                }

            }
        );
    }
    </script>
</body>
</html>